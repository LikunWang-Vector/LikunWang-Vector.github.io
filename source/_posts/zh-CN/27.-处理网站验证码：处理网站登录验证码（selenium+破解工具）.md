---
title: "27. å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium+ç ´è§£å·¥å…·ï¼‰"
date: 2023-01-17
updated: 2023-01-17
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - selenium
  - æµ‹è¯•å·¥å…·
  - æ•°æ®åˆ†æ
  - çˆ¬è™«
csdn_views: 1908
csdn_likes: 10
csdn_comments: 2
csdn_favorites: 10
csdn_url: https://blog.csdn.net/m0_59180666/article/details/128707095
cover: /images/posts/27.-å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium/b6eaaf943a78.png
lang_pair:
  en: "27. Handling Website CAPTCHA: Login Verification (Selenium + Cracking Tools)"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[27. å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium+ç ´è§£å·¥å…·ï¼‰](https://blog.csdn.net/m0_59180666/article/details/128707095)
> ğŸ“Š 1908 é˜…è¯» | ğŸ‘ 10 ç‚¹èµ | ğŸ’¬ 2 è¯„è®º | â­ 10 æ”¶è—

**ç›®å½•**

å‰è¨€

ç›®çš„

æ€è·¯

ä»£ç å®ç°

1\. æ­å»ºç¯å¢ƒ

2\. å¤„ç†éªŒè¯ç 

ï¼ˆå…³äºè½¯ä»¶IDçš„è·å–ï¼‰

3\. å¤„ç†ç™»å½•ä¿¡æ¯

4\. è·å–ä»·æ ¼è¡¨

å®Œæ•´ä»£ç 

è¿è¡Œæ•ˆæœ

æ€»ç»“

* * *

### å‰è¨€

å½“æˆ‘ä»¬è¯·æ±‚ç½‘é¡µ**è¿‡äºé¢‘ç¹** æ—¶ï¼Œæˆ–è€…è¿›è¡Œ**ç™»é™†æ“ä½œ** æ—¶ï¼Œç½‘é¡µé€šå¸¸éƒ½ä¼šæŠ›å‡º**äººæœºéªŒè¯** ï¼Œç›®çš„å°±æ˜¯åçˆ¬ï¼Œå¸¸è§çš„æœ‰æ»‘å—éªŒè¯ã€éªŒè¯ç ã€æŒ‰é¡ºåºç‚¹å‡»ç­‰å½¢å¼...

é‚£ä¹ˆé‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•**é€šè¿‡ç¨‹åºè‡ªåŠ¨éªŒè¯ä»è€Œè·³è¿‡äººå·¥æ“ä½œå®ç°å…¨è‡ªåŠ¨åŒ–** å‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªæ–°çš„çŸ¥è¯†ï¼šå›¾åƒè¯†åˆ«ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å»ºç«‹æ•°æ®é›†ã€è®­ç»ƒæ•°æ®é›†ã€ç”Ÿæˆæ¨¡å‹ç­‰æœºå™¨å­¦ä¹ æ–¹æ³•æ¥å®ç°è¯†åˆ«éªŒè¯ç å›¾ç‰‡çš„åŠŸèƒ½ï¼Œä½†å®ƒç‰¹åˆ«è€—æ—¶è€—åŠ›ï¼Œæ•ˆç‡è¿˜åº•ä¸‹ï¼Œè¿˜æ²¡æœ‰æ™®é€‚æ€§...é™¤éæ˜¯æœ‰å¤§é‡çš„è¯·æ±‚è¦æ±‚åœ¨æ­¤åŸŸåä¸‹ï¼Œå°±å¯ä»¥è®­ç»ƒä¸€æ³¢æ•°æ®é›†ï¼Œå¦åˆ™çœŸçš„å¾ˆæµªè´¹æ—¶é—´ç²¾åŠ›ï¼Œæ²¡æœ‰å¿…è¦ã€‚

é‚£ä¹ˆç¬¬äºŒç§æ–¹æ³•åº”è¿è€Œç”Ÿï¼šå®ƒå°±æ˜¯**å€ŸåŠ©å·²æœ‰çš„æˆç†ŸéªŒè¯ç ç ´Jieå·¥å…·** ï¼Œæœ¬ä¾‹ä»¥æŸç½‘ç«™**ï¼ˆè§è¯„è®ºåŒºï¼‰** ä¸ºä¾‹ã€‚

* * *

### ç›®çš„

åœ¨æœ¬åœ°é…ç½®è¯¥ç½‘ç«™ï¼Œåˆ©ç”¨å®ƒçš„éªŒè¯ç å·¥å…·å®ç°ç™»å½•å…¶å®˜ç½‘å¹¶è·å–éªŒè¯ç ç±»å‹ä¸ä»·æ ¼è¡¨ã€‚

* * *

### æ€è·¯

1\. æ­å»ºç¯å¢ƒ

2\. å¤„ç†éªŒè¯ç 

3\. å¤„ç†ç™»å½•ä¿¡æ¯

4\. è·å–ä»·æ ¼è¡¨

* * *

### ä»£ç å®ç°

#### 1\. æ­å»ºç¯å¢ƒ

![](/images/posts/27.-å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium/b6eaaf943a78.png)

è®¿é—®[è¶…çº§é¹°å®˜ç½‘ ](http://www.chaojiying.com/ "è¶…çº§é¹°å®˜ç½‘Â ")ï¼ŒæŒ‰ä¸Šå›¾æ‰€ç¤ºæ­¥éª¤ä¸‹è½½è¶…çº§é¹°å›¾åƒè¯†åˆ«demoï¼Œè§£å‹åˆ°æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚

demoä»£ç ä¿®æ”¹åå¦‚ä¸‹ï¼šï¼ˆåšä¸»ç”¨Python 3.8ï¼‰

```python #!/usr/bin/env python # coding:utf-8 import requests from hashlib import md5 class Chaojiying_Client(object): def __init__(self, username, password, soft_id): self.username = username password = password.encode('utf8') self.password = md5(password).hexdigest() self.soft_id = soft_id self.base_params = { 'user': self.username, 'pass2': self.password, 'softid': self.soft_id, } self.headers = { 'Connection': 'Keep-Alive', 'User-Agent': 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)', } def PostPic(self, im, codetype): """ im: å›¾ç‰‡å­—èŠ‚ codetype: é¢˜ç›®ç±»å‹ å‚è€ƒ http://www.chaojiying.com/price.html """ params = { 'codetype': codetype, } params.update(self.base_params) files = {'userfile': ('ccc.jpg', im)} r = requests.post('http://upload.chaojiying.net/Upload/Processing.php', data=params, files=files, headers=self.headers) return r.json() def PostPic_base64(self, base64_str, codetype): """ im: å›¾ç‰‡å­—èŠ‚ codetype: é¢˜ç›®ç±»å‹ å‚è€ƒ http://www.chaojiying.com/price.html """ params = { 'codetype': codetype, 'file_base64': base64_str } params.update(self.base_params) r = requests.post('http://upload.chaojiying.net/Upload/Processing.php', data=params, headers=self.headers) return r.json() def ReportError(self, im_id): """ im_id:æŠ¥é”™é¢˜ç›®çš„å›¾ç‰‡ID """ params = { 'id': im_id, } params.update(self.base_params) r = requests.post('http://upload.chaojiying.net/Upload/ReportError.php', data=params, headers=self.headers) return r.json() if __name__ == '__main__': # ç”¨æˆ·ä¸­å¿ƒ>>è½¯ä»¶ID ç”Ÿæˆä¸€ä¸ªæ›¿æ¢ 96001 chaojiying = Chaojiying_Client('è¶…çº§é¹°ç”¨æˆ·å', 'è¶…çº§é¹°ç”¨æˆ·åçš„å¯†ç ', '96001') # æœ¬åœ°å›¾ç‰‡æ–‡ä»¶è·¯å¾„ æ¥æ›¿æ¢ a.jpg æœ‰æ—¶WINç³»ç»Ÿé¡»è¦// im = open('a.jpg', 'rb').read() # 1902 éªŒè¯ç ç±»å‹ å®˜æ–¹ç½‘ç«™>>ä»·æ ¼ä½“ç³» 3.4+ç‰ˆ print åè¦åŠ () print(chaojiying.PostPic(im, 1902)) # print chaojiying.PostPic(base64_str, 1902) #æ­¤å¤„ä¸ºä¼ å…¥ base64ä»£ç  ``` 

åªéœ€è¦ä¿®æ”¹mainå‡½æ•°éƒ¨åˆ†çš„printå‡½æ•°çš„æ‹¬å·ä¸éƒ¨åˆ†ç¼©è¿›é—®é¢˜å³å¯ï¼Œè¿˜æ˜¯ç®€å•çš„ã€‚

#### 2\. å¤„ç†éªŒè¯ç 

æˆ‘ä»¬æŠŠè¶…çº§é¹°demoä¸­æä¾›çš„æ¥å£å¯¼å…¥é¡¹ç›®ä¸­ï¼Œåœ¨è¿™ä¸ªæ¥å£ä¸Šè¿›è¡Œæ“ä½œã€‚

é¦–å…ˆç…§å¸¸å¯¼åŒ…è¿›è¡Œå‚æ•°é…ç½®

```python from selenium.webdriver import Chrome from selenium.webdriver.common.by import By from selenium.webdriver.chrome.options import Options from chaojiying import Chaojiying_Client import time # å‡†å¤‡å¥½å‚æ•°é…ç½® opt = Options() opt.add_experimental_option('detach', True) opt.add_argument('--start-maximized') # æµè§ˆå™¨çª—å£æœ€å¤§ web = Chrome(options=opt) # æŠŠå‚æ•°é…ç½®è®¾ç½®åˆ°æµè§ˆå™¨ä¸­ web.get("è§è¯„è®ºåŒº") ``` 

ä¸‹é¢å¤„ç†éªŒè¯ç ï¼Œç”¨**screenshot_as_png** æ–¹æ³•æ‹¿åˆ°éªŒè¯ç æˆªå›¾ï¼Œå°†è´¦å·å¯†ç å’Œè½¯ä»¶IDä¼ å…¥**Client**

#### ï¼ˆå…³äºè½¯ä»¶IDçš„è·å–ï¼‰

![](/images/posts/27.-å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium/fa5e46065190.png)

**ç”¨æˆ·ç™»å½•** ä»¥åéœ€è¦åœ¨**ç”¨æˆ·ä¸­å¿ƒ** çš„**è½¯ä»¶ID** é€‰é¡¹è¿›è¡Œåˆ›å»ºï¼Œç‚¹å‡»â€œ**ç”Ÿæˆä¸€ä¸ªè½¯ä»¶ID** â€æŒ‰é’®ï¼Œè½¯ä»¶åç§°éšä¾¿èµ·ï¼Œç„¶åç•™è¡¨ä¸­å°±ä¼šå‡ºç°ä¸€æ¡ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«**è½¯ä»¶ID** ã€‚å®ƒçš„ç›®çš„å°±æ˜¯ä¸ºäº†ç»Ÿè®¡æŸä¸ªè½¯ä»¶IDçš„ç§¯åˆ†ä½¿ç”¨æƒ…å†µã€‚

æ‰«ç å…³æ³¨ä»–çš„å¾®ä¿¡å…¬ä¼—å·å¯ä»¥é¢†1000ç§¯åˆ†ï¼Œæˆ‘ä»¬ç”¨æ¥åšæµ‹è¯•å·²ç»å¤Ÿç”¨

æœ€åç”¨**PostPic** æ¥å£ä¼ é€éªŒè¯ç æˆªå›¾å’ŒéªŒè¯ç±»å‹ï¼ŒéªŒè¯ç±»å‹éœ€è¦åœ¨[å®˜ç½‘ä»·æ ¼è¡¨](http://www.chaojiying.com/price.html "å®˜ç½‘ä»·æ ¼è¡¨")æŸ¥è¯¢ï¼Œæˆ‘ä»¬åªéœ€è¦è¯†åˆ«å››ä½å­—æ¯æ•°å­—ï¼Œæ‰€ä»¥å‚æ•°ä¼ **1902** ã€‚

ç„¶åè¿”å›è¯†åˆ«å®Œæˆçš„éªŒè¯ç ç»“æœï¼Œæ˜¯ä¸€ä¸ªå­—å…¸å½¢å¼ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–**pic_str** å±æ€§æ‰€åŒ…å«çš„å†…å®¹ï¼Œä½¿ç”¨å­—å…¸çš„get('key')æ–¹æ³•ï¼Œå°†æƒ³è¦çš„å±æ€§è¾“å…¥å°±èƒ½å¾—åˆ°å¯¹åº”çš„å€¼ã€‚æˆ‘ä»¬ç”¨**get('pic_str')** ã€‚

```python # å¤„ç†éªŒè¯ç  img = web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/div/img').screenshot_as_png # TODOï¼šéœ€è¦ä¿®æ”¹ä¸‹é¢çš„ç”¨æˆ·åã€å¯†ç ã€è½¯ä»¶ID chaojiying = Chaojiying_Client('username', 'password', 'softID') dic = chaojiying.PostPic(img, 1902) veri_code = dic.get('pic_str') ``` 

#### 3\. å¤„ç†ç™»å½•ä¿¡æ¯

```python # å‘é¡µé¢ä¸­å¡«å…¥ç”¨æˆ·å, å¯†ç , éªŒè¯ç  # TODOï¼šéœ€è¦ä¿®æ”¹ä¸‹é¢çš„ç”¨æˆ·åã€å¯†ç  web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[1]/input').send_keys("username") web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[2]/input').send_keys("password") web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[3]/input').send_keys(veri_code) ``` 

è¿™ä¸ªå°±å®¹æ˜“å¤šäº†ï¼Œç›´æ¥**XPathæ‰¾æ–‡æœ¬æ¡†ï¼Œsend_keysä¼ è¾“å†…å®¹** ï¼ŒæŠŠä¿¡æ¯å¡è¿›å»ã€‚

#### 4\. è·å–ä»·æ ¼è¡¨

```python # ç‚¹å‡»ç™»å½• web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[4]/input').click() # æ‰“å¼€ä»·æ ¼ä½“ç³»é¡µé¢ web.find_element(By.XPATH, '/html/body/div[2]/div/ul/li[4]/a').click() print(web.title) for i in range(1, 7): print('================================') print(web.find_element(By.XPATH, f'/html/body/section[2]/section/section[2]/table[{i}]').text) ``` 

æœ€åä¸€æ­¥ï¼Œç‚¹å‡»ç™»å½•ï¼Œæ‰“å¼€ä»·æ ¼ä½“ç³»é¡µé¢ï¼ŒæŒ‰é¡ºåºæŠŠ6ä¸ªä»·æ ¼è¡¨ä¾æ¬¡æ‰“å°å³å¯ã€‚

* * *

### å®Œæ•´ä»£ç 

```python # 1. å›¾åƒè¯†åˆ« # 2. é€‰æ‹©äº’è”ç½‘ä¸Šæˆç†Ÿçš„éªŒè¯ç ç ´è§£å·¥å…·(è¶…çº§é¹°) from selenium.webdriver import Chrome from selenium.webdriver.common.by import By from selenium.webdriver.chrome.options import Options from chaojiying import Chaojiying_Client import time # å‡†å¤‡å¥½å‚æ•°é…ç½® opt = Options() opt.add_experimental_option('detach', True) opt.add_argument('--start-maximized') # æµè§ˆå™¨çª—å£æœ€å¤§ web = Chrome(options=opt) # æŠŠå‚æ•°é…ç½®è®¾ç½®åˆ°æµè§ˆå™¨ä¸­ web.get("è§è¯„è®ºåŒº") # å¤„ç†éªŒè¯ç  img = web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/div/img').screenshot_as_png # TODOï¼šå¡«å…¥è‡ªå·±çš„ç”¨æˆ·å(username)ã€å¯†ç (password)ã€è½¯ä»¶ID(softID) chaojiying = Chaojiying_Client('username', 'password', 'softID') dic = chaojiying.PostPic(img, 1902) veri_code = dic.get('pic_str') # TODOï¼šå¡«å…¥è‡ªå·±çš„ç”¨æˆ·å(username)ã€å¯†ç (password) # å‘é¡µé¢ä¸­å¡«å…¥ç”¨æˆ·å, å¯†ç , éªŒè¯ç  web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[1]/input').send_keys("username") web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[2]/input').send_keys("password") web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[3]/input').send_keys(veri_code) time.sleep(3) # ç‚¹å‡»ç™»å½• web.find_element(By.XPATH, '/html/body/div[3]/div/div[3]/div[1]/form/p[4]/input').click() # æ‰“å¼€ä»·æ ¼ä½“ç³»é¡µé¢ web.find_element(By.XPATH, '/html/body/div[2]/div/ul/li[4]/a').click() print(web.title) for i in range(1, 7): print('================================') print(web.find_element(By.XPATH, f'/html/body/section[2]/section/section[2]/table[{i}]').text) ``` 

* * *

### **è¿è¡Œæ•ˆæœ**

![](/images/posts/27.-å¤„ç†ç½‘ç«™éªŒè¯ç ï¼šå¤„ç†ç½‘ç«™ç™»å½•éªŒè¯ç ï¼ˆselenium/ea3087056723.png)

* * *

### æ€»ç»“

æˆ‘ä»¬è®¤è¯†äº†è¶…çº§é¹°è¿™ä¸ªå¤„ç†éªŒè¯ç çš„å·¥å…·ï¼Œå¹¶ç”¨å®ƒè‡ªå·±å¤„ç†äº†è‡ªå·±çš„éªŒè¯ç å¹¶ç”¨seleniumè·å–äº†ä»–çš„ä»·æ ¼è¡¨ï¼Œç»¼åˆé”»ç‚¼äº†ä¸€ä¸‹æˆ‘ä»¬çš„seleniumæ¨¡å—ã€‚ 
