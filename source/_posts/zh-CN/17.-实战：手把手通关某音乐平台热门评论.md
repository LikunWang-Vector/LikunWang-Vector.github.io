---
title: "17. å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º"
date: 2023-01-05
updated: 2023-01-05
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - python
  - æ•°æ®åˆ†æ
  - åŒæ€åŠ å¯†
  - js
csdn_views: 347
csdn_likes: 2
csdn_comments: 3
csdn_favorites: 8
csdn_url: https://blog.csdn.net/m0_59180666/article/details/128556505
cover: /images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/b61cfee9840a.png
lang_pair:
  en: "17. Practical: Scraping Music Platform Comments Step by Step"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[17. å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º](https://blog.csdn.net/m0_59180666/article/details/128556505)
> ğŸ“Š 347 é˜…è¯» | ğŸ‘ 2 ç‚¹èµ | ğŸ’¬ 3 è¯„è®º | â­ 8 æ”¶è—

**ç›®å½•**

å‰è¨€ **é“¾æ¥åœ¨è¯„è®ºåŒºï¼ï¼ï¼ï¼ï¼ï¼ï¼**

ç›®çš„

ä¿å§†çº§æ€è·¯

æœ€åå¥‰ä¸Šå®Œæ•´ä»£ç  

è¿è¡Œæ•ˆæœ

* * *

### å‰è¨€

ä¼—æ‰€å‘¨çŸ¥ï¼ŒæŸéŸ³ä¹å¹³å°çš„è¯„è®ºåŒºé‡‘å¥é¢‘å‡ºï¼Œçƒ­é—¨è¯„è®ºæ›´æ˜¯ç¾ä¸èƒœæ”¶ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³è¦æ‰¹é‡è·å–è¿™äº›ä¿¡æ¯æ¥åšä¿¡æ¯åˆ†æï¼Œæ•°æ®å¤„ç†ç­‰å·¥ä½œï¼Œä¹Ÿå¯ä»¥é™¶å†¶è‡ªå·±çš„æƒ…æ“ï¼Œä¸€ä¸¾å¤šå¾—ã€‚æ‰€ä»¥æˆ‘ä»¬ä»Šå¤©æ¥å°è¯•è·å–æŸéŸ³ä¹å¹³å°çš„è¯„è®ºåŒºã€‚

* * *

### ç›®çš„

è·å–æŸéŸ³ä¹å¹³å°è¯„è®ºåŒºæ•°æ®

* * *

### ä¿å§†çº§æ€è·¯

è®¿é—®æƒ³è¦è·å–è¯„è®ºçš„ç½‘é¡µ

**é“¾æ¥åœ¨è¯„è®ºåŒºï¼ï¼ï¼ï¼ï¼ï¼ï¼é“¾æ¥åœ¨è¯„è®ºåŒºï¼ï¼ï¼ï¼ï¼ï¼ï¼é“¾æ¥åœ¨è¯„è®ºåŒºï¼ï¼ï¼ï¼ï¼ï¼ï¼**

æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œçœ‹æ˜¯å¦åŒ…å«è¯„è®ºä¿¡æ¯ï¼š

ä»¥ä¸‹å›¾çš„è¯„è®ºä¸ºä¾‹

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/b61cfee9840a.png)

åœ¨é¡µé¢æºä»£ç ä¸­CRTL+FæŸ¥æ‰¾ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/d8de71abfee5.png)

å¯ä»¥çœ‹åˆ°æºä»£ç ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£å°±è¦å¦æ‰¾åŠæ³•äº†ã€‚æˆ‘ä»¬å‰é¢ç»ƒä¹ è¿‡ï¼Œå¦‚æœæºä»£ç æ²¡æœ‰ï¼Œé‚£å¤§æ¦‚ç‡å°±æ˜¯åœ¨jsè¯·æ±‚ä¸­è·å–ä¿¡æ¯äº†ã€‚ 

æ‰€ä»¥æˆ‘ä»¬ä¾æ—§æ¥åˆ°å¼€å‘è€…å·¥å…·ï¼Œè¿›å…¥ç½‘ç»œæ¨¡å—ï¼Œç­›é€‰XHRé€‰é¡¹ï¼Œåˆ·æ–°é¡µé¢ï¼Œè·å¾—ä¸€å †ä¿¡æ¯ã€‚ 

**F12--ç½‘ç»œ--Fetch/XHR--åˆ·æ–°--â†“**

é€šè¿‡ç­›é€‰ï¼ˆä¸€ä¸ªä¸ªæ‰¾ï¼‰ï¼Œæœ€åæ‰¾åˆ°äº†get commentè¯·æ±‚ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/ec55260f3601.png)

åœ¨é¢„è§ˆé¡µé¢éªŒè¯ä¸€ä¸‹æ˜¯å¦çœŸçš„æœ‰ä¿¡æ¯ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/f870a4a62f7d.png)

å‘ç°æ²¡é—®é¢˜ï¼Œç²¾å‡†å®šä½ã€‚ 

æˆ‘ä»¬å¯ä»¥è·å–çš„ä¿¡æ¯æ˜¯ï¼šé¡µé¢URLä¸è¯·æ±‚æ–¹å¼ä¸ºPOST

```python url = "è§è¯„è®ºåŒº" # è¯·æ±‚æ–¹å¼æ˜¯POST ``` 

ä½†æ˜¯ç°åœ¨é™·å…¥åƒµå±€ï¼ŒæŸ¥çœ‹è´Ÿè½½ï¼ˆä¹Ÿå°±æ˜¯ä¼ é€’çš„å‚æ•°ï¼‰å‘ç°ï¼Œå‚æ•°éƒ½æ˜¯è¢«åŠ å¯†çš„ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/472009e95bb4.png)

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦æŸ¥çœ‹æ˜¯å“ªäº›ä»£ç æŠŠæˆ‘ä»¬è¦çš„å‚æ•°ç»™åŠ å¯†äº†ï¼Œæˆ‘ä»¬è¦æŸ¥çœ‹â€œå‘èµ·ç¨‹åºâ€ä¸€æ ï¼Œæ£€æŸ¥è°ƒç”¨å †æ ˆï¼Œåœ¨å †æ ˆæœ€åè¿›å…¥çš„è¯·æ±‚å…¥æ‰‹ï¼Œ é€šè¿‡è°ƒç”¨å †æ ˆçš„è¯·æ±‚åå‘æŸ¥æ‰¾paramså‚æ•°æœªè¢«åŠ å¯†çš„æ—¶çš„æ•°æ®ä»¥åŠå‚æ•°åˆ—è¡¨ç­‰æœ‰æ•ˆä¿¡æ¯ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/d6d6182c8cef.png)

è¿›å…¥è¿™ä¸ªä»£ç éƒ¨åˆ†ï¼Œæ‰¾åˆ°æºä»£ç ã€‚ 

æ‰¾åˆ°æºä»£ç çš„æ—¶å€™å…ˆç‚¹å‡»å·¦ä¸‹è§’formatä¸€ä¸‹ï¼Œå¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬æ’ç‰ˆï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬æŸ¥æ‰¾ä¿¡æ¯ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/62a0303e1a2f.png)

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/a8c34a6a9358.png)

å †æ ˆæœ€åè¿›å…¥çš„è¯·æ±‚å®šä½åˆ°äº†sendè¿™é‡Œï¼Œé‚£ä¹ˆå°±åœ¨è¿™é‡Œæ‰“ä¸€ä¸ªæ–­ç‚¹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¸¦æœ‰commentsçš„urlã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/d6820b5b602b.png)

å¾€å‰æ‰¾ä¸€çº§ï¼Œå‘ç°å‚æ•°ä»åŠ å¯†

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/84476d56d572.png)

ç»§ç»­æŸ¥æ‰¾ï¼Œä»åŠ å¯†

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/f3a115c21822.png)

ç»§ç»­æŸ¥æ‰¾ï¼Œä»åŠ å¯†

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/d632375875fd.png)

ç»§ç»­æŸ¥æ‰¾ï¼Œä»åŠ å¯† 

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/8e100b428f2c.png)

ç»§ç»­æŸ¥æ‰¾ï¼Œè¿™ä¸ªæ—¶å€™å‘ç°å‚æ•°æ˜¯å¯è¯»çš„ï¼Œè¯´æ˜æ­¤æ—¶è¿˜æœªè¢«åŠ å¯†ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ¨çŸ¥æ˜¯åœ¨u7n.be8wè¿™éƒ¨åˆ†è¢«åŠ å¯†çš„ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/65891c72f6fc.png)

æˆ‘ä»¬è¿”å›u7néƒ¨åˆ†ï¼Œæ‰¾åˆ°è¿™éƒ¨åˆ†ä»£ç ï¼Œå°±çŸ¥é“å®ƒæ˜¯æˆ‘ä»¬æƒ³è¦çš„åŠ å¯†ä»£ç æ®µã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/de9a17a947af.png)

æˆ‘ä»¬å¯ä»¥æ•é”åœ°å‘ç°ï¼Œåœ¨ä½œç”¨åŸŸä¸­ï¼Œi7bå‚æ•°åŒ…å«çš„ä¿¡æ¯å’Œåˆšåˆšæˆ‘ä»¬çœ‹åˆ°çš„æœªåŠ å¯†å‚æ•°æ˜¯ä¸€è‡´çš„ï¼Œè€Œæºä»£ç ä¸­ï¼Œå³åŠ å¯†ç®—æ³•ä¸­ä¸æ–­åœ°å¯¹i7bè¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥æ¨çŸ¥å°±æ˜¯å¯¹i7bè¿™ä¸ªä¼ å‚å‚æ•°è¿›è¡ŒåŠ å¯†ï¼Œå°†åŠ å¯†çš„å‚æ•°ä¼ é€’åˆ°åç»­ä¸­ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/37f2e8e3b574.png)

ä¸ºäº†é€æ­¥ç ”ç©¶åŠ å¯†ç®—æ³•ï¼Œæˆ‘ä»¬è¦å…ˆæŠŠè¿™ä¸ªåŠ å¯†å‡½æ•°æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œé€æ­¥å¯¹ä»–è¿›è¡Œè§‚å¯Ÿæ˜¯å¦‚ä½•åŠ å¯†çš„ï¼Œå½“ç„¶åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬ä¹Ÿè¦æŠŠæˆ‘ä»¬ä¸€å¼€å§‹æ‰“çš„æ–­ç‚¹å–æ¶ˆæ‰ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/2e04f61f813f.png)

åˆ·æ–°é¡µé¢ï¼Œç»§ç»­æ‰§è¡Œä»£ç ç›´åˆ°å¸¦commentsçš„urlå‡ºç°

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/7e72113593f4.png)

éšåé€æ­¥æ‰§è¡Œä»£ç ï¼Œç›´åˆ°i7bå‚æ•°å­˜æ”¾æ•°æ®ï¼Œä¹Ÿå°±æ„å‘³ç€åŠ å¯†å¼€å§‹äº†ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/f78b88fbfa2b.png)

æ‰§è¡Œåˆ°å¦‚å›¾æ‰€ç¤ºçš„13422è¡Œæ—¶ï¼Œi7bçš„å‚æ•°å·²ç»ä¼ å…¥ï¼Œå¹¶ä¸”å’Œdataæ˜¯ä¸€è‡´çš„ã€‚

æ­¤æ—¶æˆ‘ä»¬è·å–åˆ°äº†çœŸæ­£è¦ä¼ å…¥çš„å‚æ•°åˆ—è¡¨ï¼š

```python csrf_token: "" cursor: "-1" offset: "0" orderType: "1" pageNo: "1" pageSize: "20" rid: "R_SO_4_1807799505" threadId: "R_SO_4_1807799505" ``` 

å†™ä¸ºå­—å…¸å½¢å¼ï¼š

```python data = { "csrf_token": "", "cursor": "-1", "offset": "0", "orderType": "1", "pageNo": "1", "pageSize": "20", "rid": "R_SO_4_1807799505", "threadId": "R_SO_4_1807799505" } ``` 

å†å•æ­¥æ‰§è¡Œï¼Œè¿›ä¸€æ­¥åï¼Œè§‚å¯Ÿå‚æ•°ï¼š

å‘ç°å¤šå‡ºä¸€ä¸ªå‚æ•°bMr5wï¼Œå®ƒçš„å‚æ•°æ˜¯è¢«åŠ å¯†çš„ï¼Œæ˜¯åœ¨window.asrseaè¿™ä¸ªå‡½æ•°é‡Œä¼ å…¥i7bå‚æ•°ååŠ å¯†çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ä»è¿™é‡Œå†æ¬¡å…¥æ‰‹ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/07b268625cf8.png)

è§‚å¯Ÿå‡½æ•°ï¼Œå¯ä»¥å‘ç°ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/13ce441a1829.png)

æ–°ç”Ÿæˆå‚æ•°çš„ä¸¤ä¸ªå±æ€§å€¼éƒ½è¢«èµ‹ç»™äº†dataï¼Œç›¸å½“äºæŠŠæ•°æ®æ›¿æ¢æˆäº†åŠ å¯†åæ•°æ®ï¼Œæˆ‘ä»¬å†å•æ­¥æ‰§è¡Œè¿›è¡ŒéªŒè¯ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/7511bee0d6ee.png)

å¯ä»¥çœ‹åˆ°å’Œé¢„æƒ³ä¸€æ ·ï¼Œdataå·²ç»è¢«åŠ å¯†äº†ã€‚

æ‰€ä»¥æˆ‘ä»¬æ›´åŠ ç¬ƒå®šï¼ŒåŠ å¯†è¿‡ç¨‹å°±æ˜¯åœ¨ window.asrsea è¿™ä¸ªå‡½æ•°é‡Œé¢è¿›è¡Œçš„ã€‚

æˆ‘ä»¬æ‰€è¦å¯»æ‰¾çš„paramså…¶å®å°±æ˜¯encTextï¼ŒencSecKeyå°±æ˜¯encSecKeyã€‚

æ‰€ä»¥æˆ‘ä»¬å†æ¬¡æŠŠç›®å…‰è½¬ç§»åˆ° window.asrsea è¿™ä¸ªå‡½æ•°ï¼Œåœ¨æºä»£ç ä¸­CTRL+FæŸ¥æ‰¾ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/899876d9c29e.png)

æˆ‘ä»¬å‘ç°åªæœ‰ä¸¤å¤„ï¼Œä¸€å¤„å°±æ˜¯ä¸Šå›¾æ‰€ç¤ºçš„ï¼Œå¦ä¸€å¤„å°±æ˜¯åŠ å¯†å‡½æ•°äº†ï¼Œé‚£ä¹ˆè¿™é‡Œçœ‹åˆ°då°†å®ƒçš„å€¼èµ‹ç»™äº† window.asrsea ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†å»æº¯æºdã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/050455b76080.png)

åœ¨è¿™æ®µä»£ç ä¸Šé¢ç›´æ¥å°±å‘ˆç°äº†å‡ ä¸ªå‡½æ•°ï¼ša,b,c,d,eã€‚è§‚å¯Ÿåˆ°å‡½æ•°eæ˜¯èµ‹å€¼ç»™window.ecnonasrï¼Œå’Œæˆ‘ä»¬çš„åŠ å¯†ç®—æ³•æ— å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç ”ç©¶abcdå››ä¸ªå‡½æ•°ã€‚

å…¥å£åœ¨å‡½æ•°dï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿”å›æºä»£ç æŸ¥çœ‹è°ƒç”¨çš„å®å‚æ˜¯ä»€ä¹ˆï¼š

```html var bMr5w = window.asrsea(JSON.stringify(i7b), bsg1x(["æµæ³ª", "å¼º"]), bsg1x(TH2x.md), bsg1x(["çˆ±å¿ƒ", "å¥³å­©", "æƒŠæ", "å¤§ç¬‘"])); ``` 

å‘ç°ç¬¬ä¸€ä¸ªå‚æ•°då°±æ˜¯**JSON.stringify(i7b)** ï¼Œå¯ä»¥å°†jså¯¹è±¡i7bå†…åŒ…å«çš„æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„dataã€‚

ç¬¬äºŒä¸ªå‚æ•°eæ˜¯**bsg1x(["æµæ³ª", "å¼º"])** ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å®ƒè¿è¡Œæ˜¯ä»€ä¹ˆç»“æœï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥å»å¼€å‘è€…å·¥å…·è‡ªå¸¦çš„æ§åˆ¶å°ï¼Œä¸¢è¿›æ§åˆ¶å°è®©æµè§ˆå™¨ç”¨å·²çŸ¥çš„æºä»£ç å¸®æˆ‘ä»¬å¤„ç†è¿™ä»½â€œä¹±ç â€ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/db3f10373835.png)

ä¸ç®¡æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼éƒ½æ˜¯å›ºå®šçš„ï¼šâ€˜010001â€™ ã€‚

åé¢ä¸¤ä¸ªå‚æ•°å¦‚æ³•ç‚®åˆ¶ï¼Œå‘ç°éƒ½æ˜¯å®šå€¼ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/e06faacc58f9.png)

å‚æ•°fã€géƒ½æ˜¯å®šå€¼ï¼Œå¯ä»¥åœ¨pyæ–‡ä»¶é‡Œå•ç‹¬å®šä¹‰ï¼Œé¿å…å•è¡Œä»£ç è¿‡é•¿ï¼Œå½±å“debugã€‚

éšåæ¥åˆ°æºä»£ç çš„è¿™ä¸€è¡Œä»£ç ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/2966de2feafd.png)

å‚æ•°iæ˜¯å‡½æ•°aå‚æ•°ä¸º16æ—¶è¿è¡Œçš„ç»“æœã€‚é‚£ä¹ˆå†è§‚å¯Ÿå‡½æ•°aï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/2715a246d0f7.png)

åˆ†æä»£ç ï¼š

```html function a(a = 16) { # éšæœºçš„16ä½å­—ç¬¦ä¸² var d, e, b = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", c = ""; for (d = 0; a > d; d += 1) # å¾ªç¯16æ¬¡ e = Math.random() * b.length, # éšæœºæ•° 1.2345 e = Math.floor(e), # å‘ä¸‹å–æ•´ 1 c += b.charAt(e); # å–å­—ç¬¦ä¸²ä¸­çš„xxxä½ç½® b return c } ``` 

ç»è¿‡åˆ†æï¼Œå®ƒå°±æ˜¯è¿”å›ä¸€ä¸ª16ä½çš„å­—ç¬¦ä¸²ã€‚

å†å›å¤´åˆ†æå‡½æ•°ï¼š

```html function c(a, b, c) { # cé‡Œé¢ä¸äº§ç”Ÿéšæœºæ•° var d, e; return setMaxDigits(131), d = new RSAKeyPair(b,"",c), e = encryptedString(d, a) } function d(d, e, f, g) { d: æ•°æ®, e: 010001, f: å¾ˆé•¿, g: 0CoJUm6Qyw8W8jud var h = {} # ç©ºå¯¹è±¡ , i = a(16); # iå°±æ˜¯ä¸€ä¸ª16ä½çš„éšæœºå€¼, æŠŠiè®¾ç½®æˆå®šå€¼ h.encText = b(d, g) h.encText = b(h.encText, i) h.encSecKey = c(i, e, f) # å¾—åˆ°çš„å°±æ˜¯encSecKey, eå’Œfæ˜¯å®šæ­»çš„ ,å¦‚æœæ­¤æ—¶æˆ‘æŠŠiå›ºå®š, å¾—åˆ°çš„keyä¸€å®šæ˜¯å›ºå®šçš„ return h } ``` 

ç”±äºå‡½æ•°cæ˜¯ä¸äº§ç”Ÿéšæœºæ•°çš„ï¼Œå¦‚æœæ­¤æ—¶æŠŠ i å‚æ•°å›ºå®šï¼Œé‚£ä¹ˆå‡½æ•° c çš„è¿”å›å€¼ä¹Ÿå›ºå®šã€‚

æˆ‘ä»¬å°è¯•è¿è¡Œä¸€æ¬¡æ¥è·å–ä¸€ä¸ª i ï¼Œå¹¶æŠŠå®ƒå›ºå®šï¼š

æˆ‘ä»¬åœ¨å‡½æ•°dçš„ç»“æŸå¤§æ‹¬å·ä¸Šæ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œè®©æµè§ˆå™¨æˆªå–åˆ°å‡½æ•°dçš„è¿”å›å€¼ï¼š

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/2f115c1312ae.png)

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è·å–äº†ä¸€ä¸ªéšæœºçš„ i ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå›ºå®šã€‚

è¿™ä¸ªæ—¶å€™ä¹Ÿå¯ä»¥å•ç‹¬å†™åˆ°å‚æ•°åˆ—è¡¨äº†ï¼š

```python # æœåŠ¡äºdçš„ e = "010001" f = "00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7" g = "0CoJUm6Qyw8W8jud" i = "UgGKZzAFQUxcBYYu" # æ‰‹åŠ¨å›ºå®šçš„. -> äººå®¶å‡½æ•°ä¸­æ˜¯éšæœºçš„ ``` 

å†æ¬¡è¿è¡Œæºä»£ç ï¼Œåœ¨åŠ å¯†å‡½æ•°ä¸‹ä¸€è¡Œæ‰“æ–­ç‚¹ï¼Œè§‚å¯ŸåŠ å¯†å‡½æ•°çš„è¿”å›å€¼encSecKeyï¼Œç”±äºå‡½æ•°cæ‰€æœ‰å‚æ•°å€¼éƒ½å·²ç»å›ºå®šï¼Œé‚£ä¹ˆencSecKeyçš„å€¼ä¹Ÿä¸ä¼šå˜ï¼Œå› ä¸ºå®ƒå°±æ˜¯ç”±å‡½æ•°cäº§ç”Ÿçš„ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™è¿”å›encSecKeyçš„å‡½æ•°ï¼š

```python def get_encSecKey(): # ç”±äºiæ˜¯å›ºå®šçš„. é‚£ä¹ˆencSecTextå°±æ˜¯å›ºå®šçš„. c()å‡½æ•°çš„ç»“æœå°±æ˜¯å›ºå®šçš„ return "594dc41fe1f0b846120c4f0bf0f6df947502e39b8209c6a34aed10693be11fc84453bc3c3b60eaff90ace02a028f1c2e4546fccbc9d98ca151f3b1a660963895e865a25db8196afaf636e83ca639ffa9c2c17dfd29179d335bb6a2cd9932d43b264cc3a47d4e5b6c85b06b59534d62bf5a02f4aa04be411385865a151040a40c" ``` 

ç°åœ¨åªå·®ä¸€ä¸ªå‚æ•°paramsï¼Œä¹Ÿå°±æ˜¯è¦ç ”ç©¶å‡½æ•°bï¼š

```html function b(a, b) { # aæ˜¯è¦åŠ å¯†çš„å†…å®¹ï¼ˆæ•°æ®ï¼‰, var c = CryptoJS.enc.Utf8.parse(b) # # bï¼šç§˜é’¥ , d = CryptoJS.enc.Utf8.parse("0102030405060708") , e = CryptoJS.enc.Utf8.parse(a) # eï¼šæ•°æ® , f = CryptoJS.AES.encrypt(e, c, { # cï¼šåŠ å¯†çš„ç§˜é’¥ iv: d, # åç§»é‡ mode: CryptoJS.mode.CBC # æ¨¡å¼: cbc }); return f.toString() } ``` 

AESåŠ å¯†ç®—æ³•è¦ä¸‰ä¸ªå‚æ•°ï¼šåŸæ–‡ å¯†é’¥ åç§»é‡ã€‚ivæ˜¯åç§»é‡ï¼Œeæ˜¯åŸæ–‡ã€‚æ‰€ä»¥å¯ä»¥æ¨æ–­å‡ºcæ˜¯å¯†é’¥ã€‚

æ‰€ä»¥å‡½æ•°dç°åœ¨åˆ†æå®Œæ¯•ï¼š

```html function d(d, e, f, g) { d: æ•°æ®, e: 010001, f: å¾ˆé•¿, g: 0CoJUm6Qyw8W8jud var h = {} # ç©ºå¯¹è±¡ , i = a(16); # iå°±æ˜¯ä¸€ä¸ª16ä½çš„éšæœºå€¼, æŠŠiè®¾ç½®æˆå®šå€¼ h.encText = b(d, g) # gç§˜é’¥ h.encText = b(h.encText, i) # è¿”å›çš„å°±æ˜¯params iä¹Ÿæ˜¯ç§˜é’¥ h.encSecKey = c(i, e, f) # å¾—åˆ°çš„å°±æ˜¯encSecKey, eå’Œfæ˜¯å®šæ­»çš„ ,å¦‚æœæ­¤æ—¶æˆ‘æŠŠiå›ºå®š, å¾—åˆ°çš„keyä¸€å®šæ˜¯å›ºå®šçš„ return h } ``` 

å¯ä»¥å‘ç°paramsè¿›è¡Œäº†ä¸¤æ¬¡åŠ å¯†ï¼šæ•°æ®+g => b => ç¬¬ä¸€æ¬¡åŠ å¯†+i => b = params

ç°åœ¨æˆ‘ä»¬ä¸¤ä¸ªé‡è¦å‚æ•°ï¼šparamså’ŒencSecKeyå·²ç»æå®šï¼Œç°åœ¨å¯ä»¥å¼€å§‹æ­£å¼å†™ä»£ç äº†ï¼š

æˆ‘ä»¬é€šè¿‡ä»¿ç…§åŠ å¯†è¿‡ç¨‹å†™ä¸‹ä¸‰ä¸ªå‡½æ•°ï¼š

```python # æŠŠå‚æ•°è¿›è¡ŒåŠ å¯† def get_params(data): # é»˜è®¤è¿™é‡Œæ¥æ”¶åˆ°çš„æ˜¯å­—ç¬¦ä¸² first = enc_params(data, g) second = enc_params(first, i) return second # è¿”å›çš„å°±æ˜¯params # è½¬åŒ–æˆ16çš„å€æ•°, ä½ä¸‹æ–¹çš„åŠ å¯†ç®—æ³•æœåŠ¡ def to_16(data): pad = 16 - len(data) % 16 data += chr(pad) * pad return data # åŠ å¯†è¿‡ç¨‹ def enc_params(data, key): iv = "0102030405060708" data = to_16(data) aes = AES.new(key=key.encode("utf-8"), IV=iv.encode('utf-8'), mode=AES.MODE_CBC) # åˆ›å»ºåŠ å¯†å™¨ bs = aes.encrypt(data.encode("utf-8")) # åŠ å¯†, åŠ å¯†çš„å†…å®¹çš„é•¿åº¦å¿…é¡»æ˜¯16çš„å€æ•° return str(b64encode(bs), "utf-8") # è½¬åŒ–æˆå­—ç¬¦ä¸²è¿”å› ``` 

get_paramsæ¨¡æ‹Ÿçš„æ˜¯ä¸¤æ¬¡åŠ å¯†ï¼Œto_16å‡½æ•°æ˜¯ä¸ºäº†æŠŠåŠ å¯†å†…å®¹éƒ½æ‰©å±•æˆ16ä½å­—ç¬¦ä¸²ï¼Œenc_paramsæ¨¡æ‹Ÿçš„æ˜¯å‡½æ•°bçš„åŠ å¯†è¿‡ç¨‹ï¼Œæœ€åè§£ç ä¸èƒ½ç›´æ¥æŠŠå­—èŠ‚è½¬æ¢å­—ç¬¦ä¸²ï¼Œéœ€è¦ç”¨åˆ°base64ç¼–ç ï¼Œå¹¶ä¸”å¦‚æœè¦è°ƒç”¨AESç®—æ³•ä¹Ÿæ˜¯è¦å¯¼åŒ…çš„ã€‚æˆ‘ä»¬è¦å¯¼å…¥è¿™ä¸¤ä¸ªåº“ï¼š

```python from Crypto.Cipher import AES from base64 import b64encode ``` 

è°ƒç”¨AESç®—æ³•çš„åº“å‡½æ•°å®‰è£…æ–¹æ³•ï¼š

**pip install pycryptodome**

æœ€åæˆ‘ä»¬å†™ä¸»å‡½æ•°æ¥æµ‹è¯•èƒ½ä¸èƒ½æŠ“åˆ°è¯„è®ºä¿¡æ¯ï¼š

```python # å‘é€è¯·æ±‚. å¾—åˆ°è¯„è®ºç»“æœ resp = requests.post(url, data={ "params": get_params(json.dumps(data)), "encSecKey": get_encSecKey() }) print(resp.text) ``` 

è¿™é‡Œæˆ‘ä»¬è¦æŠŠå­—å…¸è½¬åŒ–æˆå­—ç¬¦ä¸²æ‰èƒ½ä¾›å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™æ˜¯æ— æ³•è¿è¡ŒæˆåŠŸçš„ã€‚

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/044968f7b540.png)

å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸè¿è¡Œï¼Œæ‹¿åˆ°äº†è¯„è®ºæ•°æ®ã€‚

* * *

### æœ€åå¥‰ä¸Šå®Œæ•´ä»£ç  

```python # 1. æ‰¾åˆ°æœªåŠ å¯†çš„å‚æ•° # window.arsea(å‚æ•°, xxxx,xxx,xxx) # 2. æƒ³åŠæ³•æŠŠå‚æ•°è¿›è¡ŒåŠ å¯†(å¿…é¡»å‚è€ƒç½‘æ˜“çš„é€»è¾‘), params => encText, encSecKey => encSecKey # 3. è¯·æ±‚åˆ°ç½‘æ˜“. æ‹¿åˆ°è¯„è®ºä¿¡æ¯ # éœ€è¦å®‰è£…pycrypto: pip install pycrypto from Crypto.Cipher import AES from base64 import b64encode import requests import json url = "è§è¯„è®ºåŒº" # è¯·æ±‚æ–¹å¼æ˜¯POST data = { "csrf_token": "", "cursor": "-1", "offset": "0", "orderType": "1", "pageNo": "1", "pageSize": "20", "rid": "R_SO_4_1807799505", "threadId": "R_SO_4_1807799505" } # æœåŠ¡äºdçš„ e = "010001" f = "00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7" g = "0CoJUm6Qyw8W8jud" i = "UgGKZzAFQUxcBYYu" # æ‰‹åŠ¨å›ºå®šçš„. -> äººå®¶å‡½æ•°ä¸­æ˜¯éšæœºçš„ def get_encSecKey(): # ç”±äºiæ˜¯å›ºå®šçš„. é‚£ä¹ˆencSecTextå°±æ˜¯å›ºå®šçš„. c()å‡½æ•°çš„ç»“æœå°±æ˜¯å›ºå®šçš„ return "594dc41fe1f0b846120c4f0bf0f6df947502e39b8209c6a34aed10693be11fc84453bc3c3b60eaff90ace02a028f1c2e4546fccbc9d98ca151f3b1a660963895e865a25db8196afaf636e83ca639ffa9c2c17dfd29179d335bb6a2cd9932d43b264cc3a47d4e5b6c85b06b59534d62bf5a02f4aa04be411385865a151040a40c" # æŠŠå‚æ•°è¿›è¡ŒåŠ å¯† def get_params(data): # é»˜è®¤è¿™é‡Œæ¥æ”¶åˆ°çš„æ˜¯å­—ç¬¦ä¸² first = enc_params(data, g) second = enc_params(first, i) return second # è¿”å›çš„å°±æ˜¯params # è½¬åŒ–æˆ16çš„å€æ•°, ä½ä¸‹æ–¹çš„åŠ å¯†ç®—æ³•æœåŠ¡ def to_16(data): pad = 16 - len(data) % 16 data += chr(pad) * pad return data # åŠ å¯†è¿‡ç¨‹ def enc_params(data, key): iv = "0102030405060708" data = to_16(data) aes = AES.new(key=key.encode("utf-8"), IV=iv.encode('utf-8'), mode=AES.MODE_CBC) # åˆ›å»ºåŠ å¯†å™¨ bs = aes.encrypt(data.encode("utf-8")) # åŠ å¯†, åŠ å¯†çš„å†…å®¹çš„é•¿åº¦å¿…é¡»æ˜¯16çš„å€æ•° return str(b64encode(bs), "utf-8") # è½¬åŒ–æˆå­—ç¬¦ä¸²è¿”å› # å¤„ç†åŠ å¯†è¿‡ç¨‹ """ function a(a = 16) { # éšæœºçš„16ä½å­—ç¬¦ä¸² var d, e, b = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", c = ""; for (d = 0; a > d; d += 1) # å¾ªç¯16æ¬¡ e = Math.random() * b.length, # éšæœºæ•° 1.2345 e = Math.floor(e), # å–æ•´ 1 c += b.charAt(e); # å»å­—ç¬¦ä¸²ä¸­çš„xxxä½ç½® b return c } function b(a, b) { # aæ˜¯è¦åŠ å¯†çš„å†…å®¹, var c = CryptoJS.enc.Utf8.parse(b) # # bæ˜¯ç§˜é’¥ , d = CryptoJS.enc.Utf8.parse("0102030405060708") , e = CryptoJS.enc.Utf8.parse(a) # eæ˜¯æ•°æ® , f = CryptoJS.AES.encrypt(e, c, { # c åŠ å¯†çš„ç§˜é’¥ iv: d, # åç§»é‡ mode: CryptoJS.mode.CBC # æ¨¡å¼: cbc }); return f.toString() } function c(a, b, c) { # cé‡Œé¢ä¸äº§ç”Ÿéšæœºæ•° var d, e; return setMaxDigits(131), d = new RSAKeyPair(b,"",c), e = encryptedString(d, a) } function d(d, e, f, g) { d: æ•°æ®, e: 010001, f: å¾ˆé•¿, g: 0CoJUm6Qyw8W8jud var h = {} # ç©ºå¯¹è±¡ , i = a(16); # iå°±æ˜¯ä¸€ä¸ª16ä½çš„éšæœºå€¼, æŠŠiè®¾ç½®æˆå®šå€¼ h.encText = b(d, g) # gç§˜é’¥ h.encText = b(h.encText, i) # è¿”å›çš„å°±æ˜¯params iä¹Ÿæ˜¯ç§˜é’¥ h.encSecKey = c(i, e, f) # å¾—åˆ°çš„å°±æ˜¯encSecKey, eå’Œfæ˜¯å®šæ­»çš„ ,å¦‚æœæ­¤æ—¶æˆ‘æŠŠiå›ºå®š, å¾—åˆ°çš„keyä¸€å®šæ˜¯å›ºå®šçš„ return h } ä¸¤æ¬¡åŠ å¯†: æ•°æ®+g => b => ç¬¬ä¸€æ¬¡åŠ å¯†+i => b = params """ # å‘é€è¯·æ±‚. å¾—åˆ°è¯„è®ºç»“æœ resp = requests.post(url, data={ "params": get_params(json.dumps(data)), "encSecKey": get_encSecKey() }) print(resp.json()) ``` 

* * *

### è¿è¡Œæ•ˆæœ

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/61beb145adb7.png)

![](/images/posts/17.-å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹é€šå…³æŸéŸ³ä¹å¹³å°çƒ­é—¨è¯„è®º/2e0abc1a8aed.png)

å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸæ‹¿åˆ°äº†è¯„è®ºï¼Œåç»­å†è¿›è¡Œä»»ä½•å¤„ç†éƒ½æ˜¯å¯ä»¥çš„ï¼Œè¿™é‡Œå°±ä¸å†æ·±å…¥ç ”ç©¶äº†ã€‚ 
