---
title: "10. è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–"
date: 2022-12-31
updated: 2022-12-31
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - çˆ¬è™«
  - python
  - å¼€å‘è¯­è¨€
  - html
  - æ•°æ®åˆ†æ
csdn_views: 301
csdn_likes: 4
csdn_comments: 2
csdn_favorites: 5
csdn_url: https://blog.csdn.net/m0_59180666/article/details/128506760
cover: /images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/6346d93934d9.png
lang_pair:
  en: "10. Supplementary Example: Scraping Dynamic JS Vegetable Price Pages"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[10. è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–](https://blog.csdn.net/m0_59180666/article/details/128506760)
> ğŸ“Š 301 é˜…è¯» | ğŸ‘ 4 ç‚¹èµ | ğŸ’¬ 2 è¯„è®º | â­ 5 æ”¶è—

**ç›®å½•**

å‰è¨€

æ€è·¯

ä»£ç å®ç°

å®Œæ•´ä»£ç 

æ€»ç»“

* * *

### å‰è¨€

çˆ¬å–èœä»·çš„å…¸å‹æ¡ˆä¾‹æ˜¯åŒ—äº¬æ–°XXç½‘ç«™ï¼Œä½†æ˜¯å®ƒé¡µé¢å·²ç»æ”¹ç‰ˆï¼Œæ— æ³•é€šè¿‡bs4è§£ææ–¹å¼è¿›è¡Œçˆ¬å–ã€‚æˆ‘ä»¬é€šè¿‡åˆ†æå‘ç°å®ƒæ˜¯é€šè¿‡jsåŠ¨æ€è¯·æ±‚è¡¨æ ¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ¬¡å¯¹å®ƒè§æ‹›æ‹†æ‹›ã€‚

* * *

### æ€è·¯

1\. å…ˆè§‚å¯Ÿæºä»£ç ï¼Œå‘ç°æ•°æ®ä¸åœ¨æºä»£ç ä¸­

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/6346d93934d9.png)

2\. æ‰“å¼€ç½‘é¡µè°ƒè¯•å™¨ï¼ˆF12ï¼‰ï¼Œé€‰æ‹©Networké€‰é¡¹ï¼Œè®°å½•ç½‘ç»œæ´»åŠ¨ã€‚å½“æˆ‘ä»¬æ¢é¡µçš„æ—¶å€™ï¼Œèƒ½æ£€æµ‹åˆ°ä¸€ä¸ªåŠ¨æ€çš„jsè¯·æ±‚ï¼š

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/37c6fa0b4c66.png)

ç‚¹å‡»æ¢é¡µä»¥åå‡ºç°ä»¥ä¸‹è¯·æ±‚ï¼š

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/278bd1b6b173.png) æˆ‘ä»¬æŸ¥çœ‹è¯¦æƒ…ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ªPOSTè¯·æ±‚

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/1b6e32ede0a7.png)

æŸ¥çœ‹å…¶è´Ÿè½½ï¼Œä¹Ÿå°±æ˜¯æ‰€éœ€è¦ä¼ é€’çš„å‚æ•°ï¼š

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/4e17929608ff.png)

å‘ç°æˆ‘ä»¬ä¼ å‚é‡Œæœ‰ä¸Šè¿°ä¸ƒä¸ªæ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯å‰ä¸¤ä¸ªï¼šåˆ†åˆ«æ˜¯é™åˆ¶æ¯æ¬¡ä¼ è¾“çš„ä¿¡æ¯æ¡æ•°å’Œå½“å‰é¡µé¢ï¼Œä¹Ÿå°±æ˜¯ç¬¬currenté¡µã€‚

æ‰“å¼€URLä¹Ÿèƒ½çœ‹åˆ°é‡Œé¢ç¡®å®å­˜åœ¨æ•°æ®ï¼š

![](/images/posts/10.-è¡¥å……å®ä¾‹ï¼šjsåŠ¨æ€è¯·æ±‚èœä»·ç½‘é¡µçš„çˆ¬å–/2a02390f2b20.png) æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ç”¨requestsæ¥è®¿é—®è¯¥URL

* * *

### ä»£ç å®ç°

ç¬¬ä¸€æ­¥ï¼Œè€æœ‹å‹ï¼Œå…ˆè·å–æºä»£ç 

```python url = 'åœ¨è¯„è®ºåŒº' dat = { "limit": "", "current": "", "pubDateStartTime": "", "pubDateEndTime": "", "prodPcatid": "", "prodCatid": "", "prodName": "" } resp = requests.post(url, data=dat) # print(resp.json()) ``` 

å…¶ä¸­datæ˜¯æˆ‘ä»¬éœ€è¦çš„å‚æ•°å­—å…¸ã€‚

ç¬¬äºŒæ­¥ï¼Œè®¡ç®—å‡ºé¡µæ•°ç­‰

```python all_count = int(resp.json()["count"]) limit = int(resp.json()["limit"]) all_page_number = int(all_count / limit) ``` 

ç¬¬ä¸‰æ­¥ï¼Œå†™å…¥csvæ–‡ä»¶ï¼Œè¿™é‡Œå°±ä¸çˆ¬å–æ›´å¤šäº†ï¼Œå¦‚æœæƒ³çš„è¯å°±è‡ªå·±è¯•è¯•çœ‹~

```python with open("æ–°å‘åœ°èœä»·.csv", mode="a+", newline='', encoding="utf-8") as f: csvwriter = csv.writer(f) r1 = requests.post(url, data=dat) items = resp.json()["list"] count = items for j in items: prodName = j["prodName"] # å“å avgPrice = j["avgPrice"] # å¹³å‡ä»· highPrice = j["highPrice"] # æœ€é«˜ä»· lowPrice = j["lowPrice"] # æœ€ä½ä»· place = j["place"] # äº§åœ° prodCat = j["prodCat"] # ä¸€çº§åˆ†ç±» pubDate = j["pubDate"] # å‘å¸ƒæ—¥æœŸ unitInfo = j["unitInfo"] # å•ä½ csvwriter.writerow([prodName, avgPrice, highPrice, lowPrice, place, prodCat, pubDate, unitInfo]) f.close() print("Overï¼") resp.close() ``` 

è€è§„çŸ©ï¼Œæœ€åè®°å¾—å…³é—­æ–‡ä»¶ï¼Œå…³é—­è¯·æ±‚ç«¯å£ã€‚

* * *

### å®Œæ•´ä»£ç 

```python import requests import csv url = 'åœ¨è¯„è®ºåŒº' dat = { "limit": "20", "current": "1", "pubDateStartTime": "", "pubDateEndTime": "", "prodPcatid": "", "prodCatid": "", "prodName": "" } resp = requests.post(url, data=dat) # print(resp.json()) all_count = int(resp.json()["count"]) limit = int(resp.json()["limit"]) all_page_number = int(all_count / limit) with open("æ–°å‘åœ°èœä»·.csv", mode="a+", newline='', encoding="utf-8") as f: csvwriter = csv.writer(f) r1 = requests.post(url, data=dat) items = resp.json()["list"] count = items for j in items: prodName = j["prodName"] # å“å avgPrice = j["avgPrice"] # å¹³å‡ä»· highPrice = j["highPrice"] # æœ€é«˜ä»· lowPrice = j["lowPrice"] # æœ€ä½ä»· place = j["place"] # äº§åœ° prodCat = j["prodCat"] # ä¸€çº§åˆ†ç±» pubDate = j["pubDate"] # å‘å¸ƒæ—¥æœŸ unitInfo = j["unitInfo"] # å•ä½ csvwriter.writerow([prodName, avgPrice, highPrice, lowPrice, place, prodCat, pubDate, unitInfo]) f.close() print("Overï¼") resp.close() ``` 

* * *

### æ€»ç»“

æˆ‘ä»¬ä»Šå¤©è¡¥å……äº†ä¸€ä¸ªåŒ—äº¬æŸæ‰¹å‘ç½‘ç«™èœä»·è·å–æ–¹å¼ï¼Œâ€œç ´è§£â€äº†å®ƒè¯•å›¾é€šè¿‡åŠ¨æ€jsè¯·æ±‚æ‹¦æˆªæˆ‘ä»¬çˆ¬å–æ•°æ®çš„è¡Œä¸ºï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚å¸Œæœ›å¤§å®¶ç»§ç»­ä¸€èµ·åŠªåŠ›ä¸€èµ·åŠ æ²¹ï¼
