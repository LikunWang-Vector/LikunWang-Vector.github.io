---
title: "11. å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹"
date: 2023-01-02
updated: 2023-01-02
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - çˆ¬è™«
  - python
csdn_views: 1654
csdn_likes: 8
csdn_comments: 6
csdn_favorites: 17
csdn_url: https://blog.csdn.net/m0_59180666/article/details/128517961
cover: /images/posts/11.-å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹/26e45b7be41e.png
lang_pair:
  en: "11. Practical: Scraping Web Images with bs4 and Saving Locally"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[11. å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹](https://blog.csdn.net/m0_59180666/article/details/128517961)
> ğŸ“Š 1654 é˜…è¯» | ğŸ‘ 8 ç‚¹èµ | ğŸ’¬ 6 è¯„è®º | â­ 17 æ”¶è—

### å‰è¨€

æˆ‘ä»¬é€šè¿‡å‰é¢å‡ èŠ‚çš„å­¦ä¹ å·²ç»äº†è§£åˆ°bs4æ¨¡å—å¯¹äºæˆ‘ä»¬æŠ“å–ç½‘é¡µçš„æ–¹ä¾¿ä¹‹å¤„ï¼Œä¹Ÿé€šè¿‡ä¸€ä¸ªå®ä¾‹å®è·µäº†[æŠ“å–æŸç½‘ç«™èœä»·](https://blog.csdn.net/m0_59180666/article/details/128505916?spm=1001.2014.3001.5501 "æŠ“å–æŸç½‘ç«™èœä»·")ã€‚æœ¬èŠ‚æˆ‘ä»¬ä»¥æŸå›¾ç‰‡ç½‘ä¸ºä¾‹ï¼ˆ**é“¾æ¥æ”¾è¯„è®ºåŒº** ï¼‰ï¼Œå®ç°æŠ“å–å”¯ç¾å£çº¸æ ç›®çš„å†…å®¹å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ã€‚

![ç›®æ ‡](/images/posts/11.-å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹/26e45b7be41e.png) ç›®æ ‡ 

* * *

### æ€è·¯

1\. è·å–æ‰€æœ‰å­é¡µé¢é“¾æ¥åœ°å€

2\. è·å–å­é¡µé¢ä¸­å›¾ç‰‡èµ„æºåœ°å€

3\. ä¸‹è½½å›¾ç‰‡

* * *

### ä»£ç å®ç°

ç¬¬ä¸€æ­¥ï¼Œè€è§„çŸ©ï¼Œå…ˆè·å–é¡µé¢æºä»£ç 

```python import requests from bs4 import BeautifulSoup import time url = "åœ¨è¯„è®ºåŒº" resp = requests.get(url) resp.encoding = 'utf-8' # å¤„ç†ä¹±ç  ``` 

ç¬¬äºŒæ­¥ï¼ŒæŠŠæºä»£ç æ‰”ç»™BeautifulSoupå¤„ç†ï¼Œæ‰¾åˆ°å­é“¾æ¥

```python # æŠŠæºä»£ç äº¤ç»™bs main_page = BeautifulSoup(resp.text, "html.parser") item_list = main_page.find_all("div", class_="item masonry_brick") alist = [] for item in item_list: find = item.find("a") alist.append(find) # print(alist) ``` 

ç¬¬ä¸‰æ­¥ï¼Œéå†è®¿é—®å­é“¾æ¥ï¼Œè·å–å­é¡µé¢æºä»£ç å¹¶æ‹¿åˆ°å›¾ç‰‡ä¸‹è½½è·¯å¾„

```python for a in alist: href = 'https://www.umei.cc/' + a.get('href').strip("/") # ç›´æ¥é€šè¿‡getå°±å¯ä»¥æ‹¿åˆ°å±æ€§çš„å€¼ # æ‹¿åˆ°å­é¡µé¢çš„æºä»£ç  child_page_resp = requests.get(href) child_page_resp.encoding = 'utf-8' child_page_text = child_page_resp.text # ä»å­é¡µé¢ä¸­æ‹¿åˆ°å›¾ç‰‡çš„ä¸‹è½½è·¯å¾„ child_page = BeautifulSoup(child_page_text, "html.parser") div = child_page.find("div", class_="big-pic") img = div.find("img") src = img.get("src") ``` 

ç¬¬å››æ­¥ï¼Œä¸‹è½½å›¾ç‰‡

```python # ä¸‹è½½å›¾ç‰‡ img_resp = requests.get(src) # img_resp.content # è¿™é‡Œæ‹¿åˆ°çš„æ˜¯å­—èŠ‚ img_name = src.split("/")[-1] # æ‹¿åˆ°urlä¸­çš„æœ€åä¸€ä¸ª/ä»¥åçš„å†…å®¹ with open("img8/" + img_name, mode="wb") as f: f.write(img_resp.content) # å›¾ç‰‡å†…å®¹å†™å…¥æ–‡ä»¶ print("over!!!", img_name) time.sleep(1) print("all over!!!") ``` 

ä¸‹è½½å›¾ç‰‡çš„æ€è·¯å¾ˆç®€å•ï¼Œåªéœ€è¦æ‹¿åˆ°å›¾ç‰‡çš„å­—èŠ‚å½¢å¼ï¼Œå¹¶ç”¨äºŒè¿›åˆ¶æ–¹å¼å†™å…¥æœ¬åœ°æ–‡ä»¶å¤¹ï¼ˆwbä¸ºäºŒè¿›åˆ¶å†™ï¼Œå¾ˆæ˜æ˜¾æ˜¯write byteçš„ç¼©å†™å˜›ï¼‰

* * *

### å®Œæ•´ä»£ç 

```python # 1.æ‹¿åˆ°ä¸»é¡µé¢çš„æºä»£ç . ç„¶åæå–åˆ°å­é¡µé¢çš„é“¾æ¥åœ°å€, href # 2.é€šè¿‡hrefæ‹¿åˆ°å­é¡µé¢çš„å†…å®¹. ä»å­é¡µé¢ä¸­æ‰¾åˆ°å›¾ç‰‡çš„ä¸‹è½½åœ°å€ img -> src # 3.ä¸‹è½½å›¾ç‰‡ import requests from bs4 import BeautifulSoup import time url = "è§è¯„è®ºåŒº" resp = requests.get(url) resp.encoding = 'utf-8' # å¤„ç†ä¹±ç  # print(resp.text) # æŠŠæºä»£ç äº¤ç»™bs main_page = BeautifulSoup(resp.text, "html.parser") item_list = main_page.find_all("div", class_="item masonry_brick") alist = [] for item in item_list: find = item.find("a") alist.append(find) # print(alist) for a in alist: href = 'https://www.umei.cc/' + a.get('href').strip("/") # ç›´æ¥é€šè¿‡getå°±å¯ä»¥æ‹¿åˆ°å±æ€§çš„å€¼ # æ‹¿åˆ°å­é¡µé¢çš„æºä»£ç  child_page_resp = requests.get(href) child_page_resp.encoding = 'utf-8' child_page_text = child_page_resp.text # ä»å­é¡µé¢ä¸­æ‹¿åˆ°å›¾ç‰‡çš„ä¸‹è½½è·¯å¾„ child_page = BeautifulSoup(child_page_text, "html.parser") div = child_page.find("div", class_="big-pic") img = div.find("img") src = img.get("src") # ä¸‹è½½å›¾ç‰‡ img_resp = requests.get(src) # img_resp.content # è¿™é‡Œæ‹¿åˆ°çš„æ˜¯å­—èŠ‚ img_name = src.split("/")[-1] # æ‹¿åˆ°urlä¸­çš„æœ€åä¸€ä¸ª/ä»¥åçš„å†…å®¹ with open("img8/" + img_name, mode="wb") as f: f.write(img_resp.content) # å›¾ç‰‡å†™å…¥æ–‡ä»¶ print("over!!!", img_name) time.sleep(1) print("all over!!!") ``` 

* * *

### è¿è¡Œæ•ˆæœ

æˆ‘çˆ¬å–äº†ä¸€éƒ¨åˆ†å°±åœäº†ï¼Œå’±è¿˜æ˜¯æ‚ ç€ç‚¹ï¼Œç»ƒç»ƒæ‰‹å°±å¥½äº†ã€‚

![](/images/posts/11.-å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹/ad34b773dc0e.png)

Tipsï¼šç”±äºPyCharmæ¯æ¬¡åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æœ‰æ›´æ–°æ—¶ï¼Œéƒ½ä¼šéå†ä¸€æ¬¡æ–‡ä»¶å¤¹ï¼Œæ›´æ–°æ–‡ä»¶ç´¢å¼•ã€‚æˆ‘ä»¬çˆ¬å–å›¾ç‰‡å¤ªå¤šçš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šåœ¨è¿™ä¸€æ­¥è®©æˆ‘ä»¬çš„ç¼–è¯‘è½¯ä»¶è¶Šæ¥è¶Šå¡ï¼Œæ‰€ä»¥å¯ä»¥å³å‡»åˆ›å»ºçš„imgæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©Mark Directory as...ï¼Œå†é€‰æ‹©Excludedï¼Œè¿™æ ·å°±æ˜¯å‘Šè¯‰PyCharmï¼Œæˆ‘ä»¬è¿™ä¸ªæ–‡ä»¶å¤¹ä¸å±äºé¡¹ç›®è°ƒç”¨çš„èŒƒç•´ï¼Œå®ƒä¹Ÿå°±ä¸ä¼šæ¯æ¬¡éƒ½èŠ±åŠ›æ°”å¯¹å®ƒç´¢å¼•äº†ã€‚

![](/images/posts/11.-å®æˆ˜ï¼šbs4æ³•æŠ“å–ç½‘é¡µå›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹/9c8a03ae1ac3.png)

* * *

### æ€»ç»“

ä»Šå¤©æˆ‘ä»¬æ“ä½œäº†bs4çš„ä¸€ä¸ªå®æˆ˜ä¾‹å­ï¼Œè¿ç”¨bs4æ¨¡å—å¯¹æŸç½‘ç«™çš„å”¯ç¾å£çº¸è¿›è¡Œæ‰¹é‡ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œæå‡äº†çˆ¬è™«æŠ€æœ¯ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†å¼€å§‹xpathçš„æ•™å­¦ã€‚
