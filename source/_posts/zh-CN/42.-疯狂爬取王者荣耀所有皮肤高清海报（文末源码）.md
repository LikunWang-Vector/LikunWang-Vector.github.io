---
title: "42. ç–¯ç‹‚çˆ¬å–ç‹è€…è£è€€æ‰€æœ‰çš®è‚¤é«˜æ¸…æµ·æŠ¥ï¼ˆæ–‡æœ«æºç ï¼‰"
date: 2023-08-09
updated: 2023-08-09
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - python
  - å¼€å‘è¯­è¨€
  - ç‹è€…è£è€€
  - é«˜æ¸…å›¾ç‰‡
  - çˆ¬è™«
csdn_views: 722
csdn_likes: 5
csdn_comments: 2
csdn_favorites: 4
csdn_url: https://blog.csdn.net/m0_59180666/article/details/132195883
cover: /images/posts/42.-ç–¯ç‹‚çˆ¬å–ç‹è€…è£è€€æ‰€æœ‰çš®è‚¤é«˜æ¸…æµ·æŠ¥ï¼ˆæ–‡æœ«æºç ï¼‰/e60526d24355.png
lang_pair:
  en: "42. Practical: Scraping Game Character Skin HD Posters"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[42. ç–¯ç‹‚çˆ¬å–ç‹è€…è£è€€æ‰€æœ‰çš®è‚¤é«˜æ¸…æµ·æŠ¥ï¼ˆæ–‡æœ«æºç ï¼‰](https://blog.csdn.net/m0_59180666/article/details/132195883)
> ğŸ“Š 722 é˜…è¯» | ğŸ‘ 5 ç‚¹èµ | ğŸ’¬ 2 è¯„è®º | â­ 4 æ”¶è—

**ç›®å½•**

å‰è¨€

ç›®çš„

æ€è·¯

ä»£ç å®ç°

1\. å¯¼åŒ…ï¼Œéƒ¨ç½²å¥½ç¯å¢ƒ

2\. ä¼ªè£…è¯·æ±‚å¤´

3\. è®¿é—®è‹±é›„åˆ—è¡¨ï¼Œè·å–è‹±é›„ID

4\. åˆ†åˆ«è®¿é—®å„è‹±é›„ä¸»é¡µï¼ŒæŸ¥çœ‹å›¾ç‰‡è¯¦æƒ…

5\. å†™å…¥æœ¬åœ°æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹è‡ªåŠ¨å‘½åï¼‰

å®Œæ•´æºç 

è¿è¡Œæ•ˆæœ

æ€»ç»“

* * *

### å‰è¨€

é˜”åˆ«å·²ä¹…ï¼Œå„ä½ç²‰ä¸æœ‹å‹ä»¬ã€‚

UPå‰æ®µæ—¶é—´å¿™äºæœŸæœ«å’Œå‡ºå›½äº‹å®œï¼Œæ‰€ä»¥å¾ˆä¹…æ²¡æœ‰æ›´æ–°æˆ‘ä»¬çš„çˆ¬è™«ä¸“æ ã€‚ä»Šå¤©å¼€å§‹æˆ‘ä»¬ç»§ç»­ä¸å®šæœŸæ›´æ–°ä¸€äº›æœ‰è¶£çš„å°æ¡ˆä¾‹ï¼Œå½“ç„¶ï¼Œä¸ä¼šå¾ˆè¶Šç•Œï¼ŒUPæœ¬äººä½¿ç”¨çˆ¬è™«ä¹Ÿæ˜¯å¤Ÿç”¨å³å¯~çˆ¬è™«è™½å¥½ï¼Œè¿‡åº¦å¯æ˜¯ä¼šå–œæé“¶æ‰‹é•¯çš„ï¼

å¥½äº†ï¼Œé—²è¯å°‘å™ï¼Œæˆ‘ä»¬ä»Šå¤©å¸¦æ¥çš„æ˜¯åœ¨ç‹è€…è£è€€å®˜ç½‘æ‰¹é‡ä¸‹è½½æ‰€æœ‰è‹±é›„çš„çš®è‚¤å›¾ç‰‡ï¼Œå¹¶æŒ‰è‹±é›„åç§°å½’ç±»æ”¾äºåŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ•ˆæœå¦‚å›¾ï¼š

![](/images/posts/42.-ç–¯ç‹‚çˆ¬å–ç‹è€…è£è€€æ‰€æœ‰çš®è‚¤é«˜æ¸…æµ·æŠ¥ï¼ˆæ–‡æœ«æºç ï¼‰/e60526d24355.png)

æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç‰¹åˆ«äº•äº•æœ‰æ¡ï¼Œå¹¶ä¸”å›¾ç‰‡è´¨é‡æ˜¯å¾ˆé«˜çš„ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬å¼€å§‹ä»Šå¤©çš„æ•™ç¨‹~

* * *

### ç›®çš„

çˆ¬å–ç‹è€…è£è€€å®˜ç½‘æ‰€æœ‰è‹±é›„çš„é«˜æ¸…çš®è‚¤æµ·æŠ¥

* * *

### æ€è·¯

1\. å¯¼åŒ…ï¼Œéƒ¨ç½²å¥½ç¯å¢ƒ

2\. ä¼ªè£…è¯·æ±‚å¤´

3\. è®¿é—®è‹±é›„åˆ—è¡¨ï¼Œè·å–è‹±é›„ID

4\. åˆ†åˆ«è®¿é—®å„è‹±é›„ä¸»é¡µï¼ŒæŸ¥çœ‹å›¾ç‰‡è¯¦æƒ…

5\. å†™å…¥æœ¬åœ°æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹è‡ªåŠ¨å‘½åï¼‰

* * *

### ä»£ç å®ç°

#### 1\. å¯¼åŒ…ï¼Œéƒ¨ç½²å¥½ç¯å¢ƒ

```python # å‘é€è¯·æ±‚çš„æ¨¡å— pip install requests import requests # è§£æhtmlä»£ç çš„å·¥å…· lxml pip install lxml from lxml import etree import os from time import sleep ``` 

#### 2\. ä¼ªè£…è¯·æ±‚å¤´

```python # ä¼ªè£…è‡ªå·± headers = { 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.70 Safari/537.36', # 'referer': 'https://pvp.qq.com/web201605/herolist.shtml' } hero_list_url = 'https://pvp.qq.com/web201605/js/herolist.json' hero_list_resp = requests.get(hero_list_url, headers=headers, verify=False) ``` 

#### 3\. è®¿é—®è‹±é›„åˆ—è¡¨ï¼Œè·å–è‹±é›„ID

```python for h in hero_list_resp.json(): ename = h.get('ename') cname = h.get('cname') # è®¿é—®è‹±é›„ä¸»é¡µ hero_info_url = f'https://pvp.qq.com/web201605/herodetail/{ename}.shtml' hero_info_resp = requests.get(hero_info_url, headers=headers) hero_info_resp.encoding = 'gbk' e = etree.HTML(hero_info_resp.text) ``` 

#### 4\. åˆ†åˆ«è®¿é—®å„è‹±é›„ä¸»é¡µï¼ŒæŸ¥çœ‹å›¾ç‰‡è¯¦æƒ…

```python names = e.xpath('//ul[@class="pic-pf-list pic-pf-list3"]/@data-imgname')[0] names = [name[0:name.index('&')] for name in names.split('|')] # å‘é€è¯·æ±‚ for i, n in enumerate(names): resp = requests.get( f'https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/{ename}/{ename}-bigskin-{i + 1}.jpg', headers=headers) # æ¥æ”¶æœåŠ¡å™¨å“åº”çš„å›¾ç‰‡(çš®è‚¤) ``` 

#### 5\. å†™å…¥æœ¬åœ°æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹è‡ªåŠ¨å‘½åï¼‰

```python # ä¿å­˜å›¾ç‰‡(çš®è‚¤) if not os.path.exists(f'./13_skins/{cname}'): os.makedirs(f'./13_skins/{cname}') with open(f'./13_skins/{cname}/{n}.jpg', 'wb') as f: f.write(resp.content) print(f'å·²ä¸‹è½½çš®è‚¤: {n}') sleep(1) ``` 

* * *

### å®Œæ•´æºç 

```python # å‘é€è¯·æ±‚çš„æ¨¡å— pip install requests import requests # è§£æhtmlä»£ç çš„å·¥å…· lxml pip install lxml from lxml import etree import os from time import sleep # ä¼ªè£…è‡ªå·± headers = { 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.70 Safari/537.36', # 'referer': 'https://pvp.qq.com/web201605/herolist.shtml' } hero_list_url = 'https://pvp.qq.com/web201605/js/herolist.json' hero_list_resp = requests.get(hero_list_url, headers=headers, verify=False) # print(hero_list_resp.json()) for h in hero_list_resp.json(): ename = h.get('ename') cname = h.get('cname') # è®¿é—®è‹±é›„ä¸»é¡µ hero_info_url = f'https://pvp.qq.com/web201605/herodetail/{ename}.shtml' hero_info_resp = requests.get(hero_info_url, headers=headers) hero_info_resp.encoding = 'gbk' e = etree.HTML(hero_info_resp.text) names = e.xpath('//ul[@class="pic-pf-list pic-pf-list3"]/@data-imgname')[0] names = [name[0:name.index('&')] for name in names.split('|')] # å‘é€è¯·æ±‚ for i, n in enumerate(names): resp = requests.get( f'https://game.gtimg.cn/images/yxzj/img201606/skin/hero-info/{ename}/{ename}-bigskin-{i + 1}.jpg', headers=headers) # æ¥æ”¶æœåŠ¡å™¨å“åº”çš„å›¾ç‰‡(çš®è‚¤) # ä¿å­˜å›¾ç‰‡(çš®è‚¤) if not os.path.exists(f'./13_skins/{cname}'): os.makedirs(f'./13_skins/{cname}') with open(f'./13_skins/{cname}/{n}.jpg', 'wb') as f: f.write(resp.content) print(f'å·²ä¸‹è½½çš®è‚¤: {n}') sleep(1) ``` 

* * *

### è¿è¡Œæ•ˆæœ

![](/images/posts/42.-ç–¯ç‹‚çˆ¬å–ç‹è€…è£è€€æ‰€æœ‰çš®è‚¤é«˜æ¸…æµ·æŠ¥ï¼ˆæ–‡æœ«æºç ï¼‰/d42a9d4aa08b.png)

* * *

### æ€»ç»“

ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•çˆ¬å–ç‹è€…è£è€€å®˜ç½‘é«˜æ¸…çš®è‚¤æµ·æŠ¥ï¼Œä¸‹æœŸæƒ³çœ‹ä»€ä¹ˆå†…å®¹æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€æˆ–è€…ç§ä¿¡UP~
