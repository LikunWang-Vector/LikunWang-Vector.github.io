---
title: "04. requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢/ç™¾åº¦ç¿»è¯‘/è±†ç“£ç”µå½±ï¼‰"
date: 2022-12-28
updated: 2022-12-28
categories:
  - Pythonçˆ¬è™«å…¥é—¨ã€è¿›é˜¶ä¸å®æˆ˜
tags:
  - python
  - å¼€å‘è¯­è¨€
  - çˆ¬è™«
  - ç™¾åº¦
csdn_views: 1185
csdn_likes: 1
csdn_comments: 3
csdn_favorites: 9
csdn_url: https://blog.csdn.net/m0_59180666/article/details/128471531
cover: /images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/c1cbbc3abfb2.png
lang_pair:
  en: "04. Requests Module Introduction with Three Cases (Sogou Search/Baidu Translate/Douban Movies)"
---

> æœ¬æ–‡è¿ç§»è‡ªCSDNåšå®¢
> åŸæ–‡é“¾æ¥ï¼š[04. requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢/ç™¾åº¦ç¿»è¯‘/è±†ç“£ç”µå½±ï¼‰](https://blog.csdn.net/m0_59180666/article/details/128471531)
> ğŸ“Š 1185 é˜…è¯» | ğŸ‘ 1 ç‚¹èµ | ğŸ’¬ 3 è¯„è®º | â­ 9 æ”¶è—

**ç›®å½•**

å‰è¨€

requestsçš„å®‰è£…

1\. cmdä¸­è¾“å…¥å®‰è£…

2\. PyCharmä¸­è¿è¡Œå®‰è£…

3\. Anacondaè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…

4\. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ

æ¡ˆä¾‹1. æŠ“å–æœç‹—æœç´¢å†…å®¹

æ¡ˆä¾‹2 åˆ©ç”¨ç™¾åº¦ç¿»è¯‘ç½‘ç«™åˆ¶ä½œä¸€ä¸ªè‡ªå·±çš„ç¿»è¯‘å°ç¨‹åº

æ¡ˆä¾‹3 è±†ç“£ç”µå½±é«˜åˆ†æ’è¡Œæ¦œè¯»å–

æ€»ç»“

* * *

å‰è¨€

åœ¨å‰é¢å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨urllibæ¥æŠ“å–é¡µé¢æºä»£ç ï¼Œè¿™æ˜¯pythonå†…ç½®çš„ä¸€ä¸ªæ¨¡å—ï¼Œä½†å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„çˆ¬è™«å·¥å…·ã€‚

å¸¸ç”¨çš„æŠ“å–é¡µé¢çš„æ¨¡å—æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—â€”â€”requestsã€‚è¿™ä¸ªæ¨¡å—çš„ä¼˜åŠ¿å°±æ˜¯æ¯”urllibè¿˜è¦ç®€å•ï¼Œå¹¶ä¸”å¤„ç†å„ç§è¯·æ±‚éƒ½å¾ˆæ–¹ä¾¿ã€‚

* * *

### requestsçš„å®‰è£…

æ—¢ç„¶æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬å¯¹è¯¥æ¨¡å—è¿›è¡Œå®‰è£…ï¼Œå®‰è£…æ–¹æ³•ï¼š

#### 1\. cmdä¸­è¾“å…¥å®‰è£…

â‘  æŒ‰ä¸‹win+Rï¼Œè¾“å…¥cmdï¼ŒæŒ‰ä¸‹å›è½¦

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/c1cbbc3abfb2.png)

â‘¡ è¾“å…¥pip install requests

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/288a65dee119.png)

å¦‚æœå®‰è£…é€Ÿåº¦æ…¢çš„è¯å¯ä»¥æ”¹ç”¨å›½å†…é•œåƒæºå®‰è£…ï¼š

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/8c861acca5af.png)

#### 2\. PyCharmä¸­è¿è¡Œå®‰è£…

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/253c2177e363.png)

å¦‚æœå®‰è£…é€Ÿåº¦æ…¢çš„è¯å¯ä»¥æ”¹ç”¨å›½å†…é•œåƒæºå®‰è£…ï¼š

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/464e99ad24df.png)

#### 3\. Anacondaè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…

â‘  æ‰“å¼€Anaconda 3 Prompt

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/82e3d9af4c24.png)

â‘¡ åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœæœ‰åˆ™è·³è¿‡è¿™æ­¥ï¼‰

è¾“å…¥conda create -n ç¯å¢ƒå python=X.Xï¼ŒæŒ‰ä¸‹å›è½¦

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/d0543bcb4d90.png)

ç­‰å¾…åå‡ºç°ä¸‹é¢çš„ç•Œé¢ï¼Œè¾“å…¥yï¼Œå›è½¦![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/47b2bfa6bd2b.png)

ç­‰å¾…åå¯ä»¥çœ‹åˆ°å·²ç»åˆ›å»ºæˆåŠŸ

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/2053071a4a95.png)

â‘¢ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

è¾“å…¥conda activate ç¯å¢ƒåï¼Œæˆ–è€…è¾“å…¥activate ç¯å¢ƒå

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/1504d02cf78b.png)

è¾“å…¥pip install requests

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/148346287164.png)

å¦‚æœå®‰è£…é€Ÿåº¦æ…¢çš„è¯å¯ä»¥æ”¹ç”¨å›½å†…é•œåƒæºå®‰è£…ï¼š

pip install requests -i https://pypi.tuna.tsinghua.edu.cn/simple requests

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/4a9f53065c6c.png)

è¿˜å¯ä»¥ç”¨condaå®‰è£…ï¼Œè¾“å…¥conda install requests

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/e7bfb1eb3dca.png)

è¾“å…¥yï¼Œå›è½¦

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/675fcbc46559.png)

ç­‰å¾…åå‡ºç°doneï¼Œå®‰è£…æˆåŠŸã€‚

#### 4\. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ

â‘  å¯ä»¥åœ¨pyæ–‡ä»¶ä¸­import requestsçœ‹æ˜¯å¦æŠ¥é”™

â‘¡ å¯ä»¥åœ¨3.ä¸­æåˆ°çš„å‡ ç§æ–¹æ³•é‡Œè¾“å…¥pip listå›è½¦æŸ¥çœ‹å·²å®‰è£…åº“å‡½æ•°åˆ—è¡¨ï¼ˆä»¥Anacondaä¸ºä¾‹ï¼‰

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/eaa4c1e406e5.png)

å¯ä»¥çœ‹åˆ°requestså·²ç»åœ¨æˆ‘ä»¬çš„å·²å®‰è£…åˆ—è¡¨ä¸­äº†ï¼Œå®‰è£…å®Œæˆã€‚ 

* * *

### æ¡ˆä¾‹1. æŠ“å–æœç‹—æœç´¢å†…å®¹

``` import requests url = 'https://www.so.com/s?ie=utf-8&src=dlm_b_cube&shb=1&hsid=0d7b9150b571cec3&ls=n144c1cd899&ssid=&q=å‘¨æ°ä¼¦' ua = { "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.81 Safari/537.36 Edg/104.0.1293.54" } # resp = requests.get(url) # è¿™æ ·å¯èƒ½é€ æˆæ‹¦æˆªï¼Œè¢«è¯†åˆ«å‡ºçˆ¬è™«ç¨‹åºï¼Œéœ€è¦ç”¨User-Agentåçš„å‚æ•°ï¼Œå³headersè¿›è¡Œä¿®é¥° resp = requests.get(url, headers=ua) # å¤„ç†ä¸€ä¸ªå°å°çš„åçˆ¬ print(resp) print(resp.text) # æ‹¿åˆ°é¡µé¢æºä»£ç  resp.close() ``` 

å…¶ä¸­ï¼Œurlå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œæƒ³è·å–å“ªä¸ªæœç´¢ç•Œé¢çš„æºä»£ç ï¼Œå°±ä»å“ªä¸ªé¡µé¢å¤åˆ¶æ¥ç½‘é¡µurlï¼›

uaï¼Œå³User-Agentï¼Œéœ€è¦ä»ä¸Šä¸€èŠ‚æåˆ°çš„å“åº”å¤´ä¸­ç²˜è´´è‡ªå·±çš„uaã€‚

ç¬¬9/10è¡Œä»£ç å¤„ç†äº†ä¸€ä¸ªå°å°çš„åçˆ¬ï¼Œå¯ä»¥å°†æˆ‘ä»¬çš„pyç¨‹åºå‘å‡ºè¯·æ±‚çš„uaï¼ˆå³ç”¨æˆ·ä»£ç†ï¼‰â€œä¼ªè£…â€æˆæ­£å¸¸çš„æµè§ˆå™¨ï¼Œè€Œéç¼–ç¨‹è½¯ä»¶ã€‚

* * *

### æ¡ˆä¾‹2 åˆ©ç”¨ç™¾åº¦ç¿»è¯‘ç½‘ç«™åˆ¶ä½œä¸€ä¸ªè‡ªå·±çš„ç¿»è¯‘å°ç¨‹åº

``` import requests url = "https://fanyi.baidu.com/sug" s = input("è¯·è¾“å…¥ä½ è¦ç¿»è¯‘çš„è‹±æ–‡å•è¯ï¼š") dat = { "kw": s } # å‘é€postè¯·æ±‚ï¼Œå‘é€çš„æ•°æ®å¿…é¡»æ”¾åœ¨å­—å…¸ä¸­ï¼Œé€šè¿‡dataå‚æ•°è¿›è¡Œä¼ é€’ resp = requests.post(url, data=dat) # print(resp.text) # è¿™æ ·ä¸­æ–‡ä¼šå‡ºç°ä»£ç ï¼Œä¸åˆ©äºæå–æ•°æ® resp_json = resp.json() # å°†æœåŠ¡å™¨è¿”å›çš„å†…å®¹ç›´æ¥å¤„ç†æˆjson() => ä¹Ÿå³pythonä¸­çš„å­—å…¸dict print(resp_json['data'][0]['v']) # æ‹¿åˆ°è¿”å›å­—å…¸çš„å†…å®¹ resp.close() ``` 

æ­¤ä»£ç ä¸ç”¨æ›´æ”¹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

æ³¨æ„ https://fanyi.baidu.com/sug è¿™ä¸ªurlï¼Œé€šè¿‡F12å¯ä»¥å¾—çŸ¥ï¼Œå®ƒæ˜¯é€šè¿‡postæ–¹å¼æäº¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦æ¨¡æ‹Ÿpostè¯·æ±‚ï¼Œä½¿ç”¨requests.post()è¿™ä¸ªapiï¼Œè¿”å›åˆ°respä¸­ï¼Œå†å°†è¿”å›çš„æ•°æ®ç›´æ¥å¤„ç†æˆjsonæ•°æ®ï¼ˆç›¸å½“äºPythonä¸­çš„å­—å…¸ï¼‰ã€‚ç›´æ¥æ‰“å°è¿™ä¸ªjsonï¼Œä¿¡æ¯æ¯”è¾ƒå¤šæ¯”è¾ƒå¤æ‚ï¼Œè§‚æ„Ÿå·®ã€‚æˆ‘ä»¬é€‰æ‹©æ€§æ‰“å°å¯¹åº”éœ€è¦çš„å†…å®¹å°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦çš„ç¿»è¯‘ç»“æœäº†ï¼Œè§‚çœ‹è¾ƒå¥½~

è¿è¡Œç¤ºä¾‹ï¼š

![](/images/posts/04.-requestsæ¨¡å—å…¥é—¨ä¸ä¸‰ä¸ªæ¡ˆä¾‹ï¼ˆæœç‹—æœç´¢ç™¾åº¦ç¿»è¯‘/6d5201cea850.png)

å¯ä»¥çœ‹åˆ°å·²ç»å®Œç¾â€œæ¬è¿â€äº†ç™¾åº¦ç¿»è¯‘çš„ç»“æœï¼å¯¹äºæˆ‘ä»¬åˆå­¦è€…è¿˜æ˜¯å¾ˆæœ‰æˆå°±æ„Ÿçš„~ 

* * *

### æ¡ˆä¾‹3 è±†ç“£ç”µå½±é«˜åˆ†æ’è¡Œæ¦œè¯»å–

``` import requests # url = "https://movie.douban.com/j/chart/top_list?type=24&interval_id=100%3A90&action=&start=0&limit=20" # å‚æ•°å¤ªå¤šå¤ªå¤æ‚ï¼Œç”¨f{}æ›¿æ¢å¤ªç¹ç url = "https://movie.douban.com/j/chart/top_list" # é‡æ–°å°è£…å‚æ•° param = { "type": "24", "interval_id": "100:90", "action": "", "start": 0, "limit": 20, } headers = { "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.81 Safari/537.36 Edg/104.0.1293.54" } # resp = requests.get(url=url, params=param) #è¿˜éœ€é‡æ–°è£…å¡«headersï¼Œå› ä¸ºè¢«åçˆ¬äº† resp = requests.get(url=url, params=param, headers=headers) print(resp.request.url) # æ˜¾ç¤ºå®é™…è®¿é—®çš„ç½‘é¡µï¼Œå³url+?+params # print(resp.text) # ä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºè¯´æ˜è¢«åçˆ¬äº†ï¼Œé¦–å…ˆè¦æ£€æŸ¥UA # print(resp.request.headers) # æ£€æŸ¥headersæ˜¯å¦æœ‰é—®é¢˜ #{'User-Agent': 'python-requests/2.27.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive'} print(resp.json()) # startçš„ä½œç”¨ï¼šä»topå‡ å¼€å§‹ # limitçš„ä½œç”¨ï¼šä¸€æ¬¡æŸ¥è¯¢å‡ å resp.close() # å…³æ‰respï¼Œå¦åˆ™å¯èƒ½å‡ºç°è¯·æ±‚å£å µæ­»çš„æƒ…å†µ ``` 

è¿™é‡Œæˆ‘ä»¬ç”¨äº†ä¸€ä¸ªå·§å¦™çš„åœ°æ–¹ï¼Œå› ä¸ºçœ‹åˆ°åŸæœ¬çš„urlå¤ªé•¿å¤ªå¤æ‚å¤ªç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¦è¾Ÿè¹Šå¾„ï¼Œé‡æ–°å°è£…äº†ä¸€ç»„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æŠŠtop_liståé¢çš„å‚æ•°éƒ½å°è£…è¿›paramé‡Œï¼Œä¾¿äºæˆ‘ä»¬åç»­ä¿®æ”¹ã€‚

headersä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„uaï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹å‚æ•°åï¼Œè¿™ä¸ªæ— æ‰€è°“çš„~

è¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯getæ–¹å¼è¯·æ±‚ï¼Œå’Œæ¡ˆä¾‹2ä¸åŒã€‚å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ï¼Œpostæ˜¯ä¸Šä¼ ä¿®æ”¹ï¼Œgetæ˜¯è·å–ä¸‹è½½ï¼Œæ‰€ä»¥ç™¾åº¦ç¿»è¯‘éœ€è¦postæˆ‘ä»¬æƒ³è¦ç¿»è¯‘çš„è¯è¯­ï¼Œè€Œè±†ç“£ç”µå½±ç½‘éœ€è¦getæˆ‘ä»¬æƒ³è¦è·å–çš„ä¿¡æ¯ã€‚

åœ¨getè¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬çš„paramå°è£…çš„å†…å®¹ä¼šè‡ªåŠ¨æ·»åŠ åˆ°urlåé¢ï¼Œè‡ªåŠ¨æ‹¼æ¥æˆæˆ‘ä»¬æœ€å¼€å§‹çœ‹åˆ°çš„é‚£ä¸ªå†—é•¿çš„ä»£ç ï¼å…¶å®æˆ‘ä»¬startçš„ä½œç”¨å°±æ˜¯ä»ç¬¬å‡ åå¼€å§‹ã€‚limitçš„ä½œç”¨å°±æ˜¯ä¸€æ¬¡æŸ¥è¯¢å‡ åï¼ŒçŸ¥é“è¿™ä¸¤ä¸ªæ¡ä»¶ä»¥åå…¶å®å¯ä»¥å†™ä¸€ä¸ªå¾ªç¯ï¼Œå¾ªç¯næ¬¡ä»è€Œæ‰§è¡Œå‡ºè±†ç“£ç”µå½±å‰20nçš„æ’åè¯¦æƒ…ã€‚

* * *

### æ€»ç»“

æœ¬èŠ‚æˆ‘ä»¬å­¦ä¼šäº†requestsæ¨¡å—çš„å®‰è£…ï¼ŒæˆåŠŸç¼–å†™äº†ä¸‰ä¸ªç®€å•çš„çˆ¬è™«æ¡ˆä¾‹ï¼Œè®¤è¯†äº†ä¸¤ç§ä¸åŒè¯·æ±‚æ–¹å¼çš„requestsç”¨æ³•ï¼Œå¢æ·»äº†å­¦ä¹ å…´è¶£ï¼Œå¢å¼ºäº†ç¼–ç¨‹çš„è‡ªä¿¡å¿ƒï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å’Œæˆ‘ä¸€èµ·å…±åŒè¿›æ­¥ï¼Œä¸€èµ·åŠªåŠ›~
